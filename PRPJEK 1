-- Load WindUI
local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

-- Buat Window
local Window = WindUI:CreateWindow({
    Title = "Zyqrin Hub",
    Icon = "door-open",
    Author = "by .ftgs and .ftgs",
})

-- Buat TpTab Teleport
local TeleportTab = Window:Tab({
    Title = "Teleport",
    Icon = "navigation",
    Locked = false,
})

local CameraTab = Window:Tab({
    Title = "Zoom",
    Icon = "navigation",
    Locked = false,
})
-- Daftar koordinat teleport
local teleportPoints = {
    {Name = "TP 1", CFrame = CFrame.new(206.39, -2.82, 24.40)},
    {Name = "TP 2", CFrame = CFrame.new(747.84, 0.54, -51.73)},
    {Name = "TP 3", CFrame = CFrame.new(402.01, -2.82, 14.84)},
    {Name = "TP 4", CFrame = CFrame.new(547.18, -2.82, 16.71)},
    {Name = "TP 5", CFrame = CFrame.new(758.57, -5.47, 15.28)},
    {Name = "TP 6", CFrame = CFrame.new(1082.57, -2.82, 5.47)},
    {Name = "TP 7", CFrame = CFrame.new(1553.39, -2.82, -14.61)},
    {Name = "TP 8", CFrame = CFrame.new(2276.71, -2.82, -14.40)},
    {Name = "TP 9", CFrame = CFrame.new(2602.92, -2.82, -2.50)},
}

-- Fungsi untuk ambil HumanoidRootPart, termasuk setelah respawn
local function getHRP()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    return character:WaitForChild("HumanoidRootPart")
end

-- Fungsi teleport halus lebih cepat
local function smoothTP(targetCFrame)
    local hrp = getHRP() -- ambil HRP terbaru
    local duration = 0.4 -- lebih cepat dari sebelumnya
    local steps = 40
    local startCFrame = hrp.CFrame
    for i = 1, steps do
        hrp.CFrame = startCFrame:Lerp(targetCFrame, i/steps)
        task.wait(duration/steps)
    end
end

-- Buat tombol untuk setiap koordinat
for _, tp in ipairs(teleportPoints) do
    TeleportTab:Button({
        Title = tp.Name,
        Desc = "Teleport to "..tp.Name,
        Callback = function()
            smoothTP(tp.CFrame)
        end
    })
end

local player = game.Players.LocalPlayer
local camera = workspace.CurrentCamera

-- Variabel kamera
local zoomDistance = 20
local zoomHeight = 5
local minZoom = 5
local maxZoom = 500

-- Detect pinch gesture
local uis = game:GetService("UserInputService")
local touches = {}

uis.TouchStarted:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch then
        touches[input.UserInputState] = input.Position
    end
end)

uis.TouchMoved:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch then
        touches[input.UserInputState] = input.Position
        local touchList = {}
        for k,v in pairs(touches) do table.insert(touchList, v) end
        if #touchList == 2 then
            local p1, p2 = touchList[1], touchList[2]
            local currentDist = (p1 - p2).Magnitude
            if not touches.prevDist then touches.prevDist = currentDist end
            local delta = currentDist - touches.prevDist
            zoomDistance = math.clamp(zoomDistance - delta*0.1, minZoom, maxZoom)
            touches.prevDist = currentDist
        end
    end
end)

uis.TouchEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch then
        touches[input.UserInputState] = nil
        if next(touches) == nil then
            touches.prevDist = nil
        end
    end
end)

-- Update kamera setiap frame
game:GetService("RunService").RenderStepped:Connect(function()
    local char = player.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        local hrp = char.HumanoidRootPart
        camera.CameraType = Enum.CameraType.Scriptable
        camera.CFrame = hrp.CFrame * CFrame.new(0, zoomHeight, zoomDistance)
    end
end)

-- Slider opsional untuk tinggi kamera
CameraTab:Slider({
    Title = "Camera Height",
    Desc = "Tinggi kamera dari karakter",
    Step = 1,
    Value = {Min = 0, Max = 200, Default = 5},
    Callback = function(value)
        zoomHeight = value
    end
})
